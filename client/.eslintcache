[{"C:\\Users\\Heth Gala\\Desktop\\Mychat\\client\\src\\index.js":"1","C:\\Users\\Heth Gala\\Desktop\\Mychat\\client\\src\\reportWebVitals.js":"2","C:\\Users\\Heth Gala\\Desktop\\Mychat\\client\\src\\App.js":"3","C:\\Users\\Heth Gala\\Desktop\\Mychat\\client\\src\\components\\Chat.js":"4","C:\\Users\\Heth Gala\\Desktop\\Mychat\\client\\src\\components\\Login.js":"5","C:\\Users\\Heth Gala\\Desktop\\Mychat\\client\\src\\components\\List.js":"6"},{"size":500,"mtime":1608556940889,"results":"7","hashOfConfig":"8"},{"size":362,"mtime":1608556291144,"results":"9","hashOfConfig":"8"},{"size":1019,"mtime":1608795782833,"results":"10","hashOfConfig":"8"},{"size":2644,"mtime":1608814278499,"results":"11","hashOfConfig":"8"},{"size":3249,"mtime":1608814250993,"results":"12","hashOfConfig":"8"},{"size":2066,"mtime":1608814262462,"results":"13","hashOfConfig":"8"},{"filePath":"14","messages":"15","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},"1uo6ccn",{"filePath":"17","messages":"18","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"19","messages":"20","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"21","usedDeprecatedRules":"16"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"24","usedDeprecatedRules":"25"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"30","usedDeprecatedRules":"16"},"C:\\Users\\Heth Gala\\Desktop\\Mychat\\client\\src\\index.js",[],["31","32"],"C:\\Users\\Heth Gala\\Desktop\\Mychat\\client\\src\\reportWebVitals.js",[],"C:\\Users\\Heth Gala\\Desktop\\Mychat\\client\\src\\App.js",["33"],"import './App.css';\nimport React, { useEffect, useState } from \"react\";\nimport Chat from '../src/components/Chat'\nimport 'materialize-css/dist/css/materialize.min.css'\nimport M from \"materialize-css/dist/js/materialize.min.js\";\nimport Login from '../src/components/Login'\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom'\nimport List from './components/List';\nimport Pusher from 'pusher-js'\n\n\nfunction App() {\n\n  const [pusher, setPusher] = useState()\n\n  useEffect(() => {\n    M.AutoInit();\n  }, []);\n\n  useEffect(() => {\n    setPusher(new Pusher('b48cb6e685ac70d70a56', {\n      cluster: 'ap2'\n    }))\n    console.log(1)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  return (\n    <Router>\n      {pusher && <div className=\"App\">\n        <Route exact path='/' component={Login} />\n        <Route exact path='/chat' component={() => <Chat pusher={pusher} />} />\n        <Route exact path='/list' component={List} />\n      </div>}\n    </Router>\n  );\n}\n\nexport default App;\n","C:\\Users\\Heth Gala\\Desktop\\Mychat\\client\\src\\components\\Chat.js",["34","35"],"import React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\n\r\nconst Chat = (props) => {\r\n\r\n    const [messages, setMessages] = useState([])\r\n    const [msg, setMsg] = useState()\r\n\r\n    const getCurrentChat = async () => {\r\n        const response = await axios.get(`/api/chat/${localStorage.getItem('currentMessageUser')}`)\r\n        console.log(response.data)\r\n        if (response) {\r\n            setMessages(response.data.messages)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        getCurrentChat()\r\n        console.log(props.pusher)\r\n        const message_channel = props.pusher.subscribe('message');\r\n        message_channel.bind(`${localStorage.getItem('currentMessageUser')}`, function (data) {\r\n            setMessages(oldmsg => [...oldmsg, data])\r\n        })\r\n\r\n        return () => {\r\n            props.pusher.unsubscribe('message')\r\n        }\r\n\r\n    }, [])\r\n\r\n    const onChange = e => {\r\n        e.preventDefault()\r\n        setMsg(e.target.value)\r\n    }\r\n\r\n    const sendMessageHandler = async () => {\r\n        const data = JSON.stringify({\r\n            chatId: localStorage.getItem('currentMessageUser'),\r\n            msg,\r\n            sender: localStorage.getItem('userId')\r\n        })\r\n\r\n        var config = {\r\n            method: 'post',\r\n            url: '/api/chat/newMessage',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            data: data\r\n        };\r\n\r\n        const response = await axios(config);\r\n        console.log(response.data)\r\n    }\r\n\r\n    return (\r\n        < div className=\"container\" >\r\n            {\r\n                messages.length !== 0 && messages.map(message =>\r\n                (\r\n                    <div key={message._id}>\r\n                        {message.message}-{message.sender}\r\n                    </div>\r\n                )\r\n                )\r\n\r\n            }\r\n            <div class=\"row\">\r\n                <form class=\"col s12\">\r\n                    <div class=\"row\">\r\n                        <div class=\"input-field col s6 \">\r\n                            <input id=\"message\" type=\"text\" value={msg} onChange={onChange} class=\"validate blue-text\" />\r\n                            <label for=\"message\" className=\"blue-text\">Type a message</label>\r\n                        </div>\r\n                        <div class=\"input-field col s1\">\r\n                            <a className=\"btn blue white-text\" onClick={sendMessageHandler}><i class=\"material-icons\">send</i></a>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div >\r\n    )\r\n}\r\n\r\nexport default Chat\r\n",["36","37"],"C:\\Users\\Heth Gala\\Desktop\\Mychat\\client\\src\\components\\Login.js",[],"C:\\Users\\Heth Gala\\Desktop\\Mychat\\client\\src\\components\\List.js",["38"],"import React, { useEffect, useState } from 'react'\r\nimport axios from 'axios'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nconst List = () => {\r\n\r\n    const [usersList, setUsersList] = useState([]);\r\n\r\n    const getTheList = async () => {\r\n        const userId = localStorage.getItem('userId');\r\n\r\n        const data = JSON.stringify({ \"user\": userId });\r\n\r\n        const config = {\r\n            method: 'post',\r\n            url: '/api/chat/getAllChats',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            data: data\r\n        };\r\n        const response = await axios(config);\r\n        console.log(response.data)\r\n        if (response) {\r\n            setUsersList(response.data)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        getTheList()\r\n    }, [])\r\n    let history = useHistory()\r\n\r\n    const onSelectHandler = (currentChatId) => {\r\n        localStorage.setItem('currentMessageUser', currentChatId)\r\n        history.push('/chat')\r\n    }\r\n\r\n    return (\r\n        <div className=\"container row\">\r\n            <div className=\"col s12\">\r\n                {\r\n                    usersList.length === 0 ?\r\n                        <div className=\"container\">\r\n                            <div class=\"progress\">\r\n                                <div class=\"indeterminate blue\"></div>\r\n                            </div>\r\n                        </div> :\r\n                        <div class=\"collection\">\r\n\r\n                            {usersList.map(element =>\r\n                                <div key={element._id}>\r\n                                    <b><a className=\"collection-item blue-text\" onClick={e => {\r\n                                        e.preventDefault();\r\n                                        onSelectHandler(element._id)\r\n                                    }}>{element.user.name}</a></b>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default List\r\n",{"ruleId":"39","replacedBy":"40"},{"ruleId":"41","replacedBy":"42"},{"ruleId":"43","severity":1,"message":"44","line":7,"column":42,"nodeType":"45","messageId":"46","endLine":7,"endColumn":48},{"ruleId":"47","severity":1,"message":"48","line":29,"column":8,"nodeType":"49","endLine":29,"endColumn":10,"suggestions":"50"},{"ruleId":"51","severity":1,"message":"52","line":76,"column":29,"nodeType":"53","endLine":76,"endColumn":93},{"ruleId":"39","replacedBy":"54"},{"ruleId":"41","replacedBy":"55"},{"ruleId":"51","severity":1,"message":"52","line":53,"column":40,"nodeType":"53","endLine":56,"endColumn":40},"no-native-reassign",["56"],"no-negated-in-lhs",["57"],"no-unused-vars","'Switch' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'props.pusher'. Either include it or remove the dependency array.","ArrayExpression",["58"],"jsx-a11y/anchor-is-valid","The href attribute is required for an anchor to be keyboard accessible. Provide a valid, navigable address as the href value. If you cannot provide an href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement",["56"],["57"],"no-global-assign","no-unsafe-negation",{"desc":"59","fix":"60"},"Update the dependencies array to be: [props.pusher]",{"range":"61","text":"62"},[883,885],"[props.pusher]"]